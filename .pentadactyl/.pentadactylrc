""
""  Pentadactyl settings
""  vim: ft=vim fdm=marker:
""
""###############################################

so ~/.pentadactyl/stylesheets/user.css

colorscheme solarized-light

" @section Options {{{
" ******************************************************************************

" always new tab
set newtab=all

set hintkeys=asdfg;lkjh
"set hintkeys=asdflkj
"
hi -a Hint font-size: 9pt !important;

set strictfocus='chrome:*':laissez-faire,*:despotic

" Yank to sytem clipboard
vmap -builtin y "+y
nmap -builtin Y "+Y

" Better search
set incfind
set hlfind
set findcase=smart

" Faster scrolling
map -b j 5j
map -b k 5k
map -b h 5h
map -b l 5l
set scs=1
set scrolltime=0

" Full zoom
map -b zi ZI
map -b zo ZO
map -builtin  \- ZO
map -builtin  = ZI
map -builtin  _ zo
map -builtin  + zi
" }}}

" @section Passkeys {{{
" ******************************************************************************
" harware acceleration
set! layers.acceleration.force-enabled=true
set! layers.offmainthreadcomposition.enabled=true

" cache
set! browser.cache.disk.enable=false

" network
set! network.http.pipelining=true
set! network.http.pipelining.ssl=true
set! network.http.proxy.pipelining=true
set! privacy.trackingprotection.enabled=true
set! network.prefetch-next=false

" enable html5 player
set! media.mediasource.enabled=true
set! media.mediasource.mp4.enabled=true
set! media.mediasource.webm.enabled=true
set! media.fragmented-mp4.enabled=true
set! media.fragmented-mp4.exposed=true
set! media.fragmented-mp4.ffmpeg.enabled=true
set! media.fragmented-mp4.gmp.enabled=true
set! media.fragmented-mp4.use-blank-decoder=false

" misc
set! nglayout.initialpaint.delay=0
set! privacy.trackingprotection.enabled=true

" }}}

" @section Passkeys {{{
" ******************************************************************************
set passkeys=

" DuckDuckGo
set passkeys+="https://duckduckgo\.com/":jkv

" Gmail
set passkeys+="https://mail\.google\.com/":jkg

" Agar
set passkeys+="http://agar\.io/":rt<space>
" }}}
"

" @section Mappings {{{
" ******************************************************************************

" Disable some Pentadactyl default mappings
nmap ` <Nop>
nmap w <Nop>

" Add some of our own mappings
nmap <C-g> :pa<CR>
"nmap u :emenu Affichage.Code source de la page<CR>
nmap <C-L> :webclipper<CR>
nmap <F9> :sbclose<CR>
nmap <F10> :jstoggle<CR>
" }}}

" @section Auto commands {{{
" ******************************************************************************

" auto pin wechat
" autocmd PageLoad wx.qq.com js if(!getBrowser().mCurrentTab.pinned) getBrowser().pinTab(getBrowser().mCurrentTab);

" hint instagram load more
autocmd LocationChange instagram.com set ht+=a.button.button-grey.button-large

" }}}

" @section Custom commands {{{
" ******************************************************************************

command! zmtoggle :js (function() { var p = "layout.css.devPixelsPerPx"; prefs.get(p) === "1" ? prefs.safeSet(p, "1.25") : prefs.safeSet(p, "1") })()

command! jstoggle :js (function() { var p = "javascript.enabled"; prefs.set(p, !prefs.get(p)); dactyl.echo(p+" is now set to "+prefs.get(p)+"\n") })()


command! read :open javascript:function%20iptxt(){var%20d=document;try{if(!d.body)throw(0);window.location='http://www.instapaper.com/text?u='+encodeURIComponent(d.location.href);}catch(e){alert('Please%20wait%20until%20the%20page%20has%20loaded.');}}iptxt();void(0)

command! delicious :open javascript:(function(){f='http://www.delicious.com/save?url='+encodeURIComponent(window.location.href)+'&title='+encodeURIComponent(document.title)+'&v=5&';a=function(){if(!window.open(f+'noui=1&jump=doclose','deliciousuiv5','location=yes,links=no,scrollbars=no,toolbar=no,width=550,height=550'))location.href=f+'jump=yes'};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})()

command! valid :open javascript:void(location='http://validator.w3.org/check?uri='+escape(location))

command! ghfinder :open javascript:(function(){var%20a=(new%20RegExp("github.com/(.+)","i")).exec(window.location.href);var%20f=a?a[1].split("/"):[];var%20b=f[0];var%20d=f[1];var%20e=f[3];var%20c="http://sr3d.github.com/GithubFinder/?utm_source=bml"+(a?"&user_id="+b+"&repo="+d+(e?"&branch="+e:""):"");if(!c){alert("Invalid%20Github%20URL");return}window.open(c)})()

command! webclipper :open javascript:(function()%7BEN_CLIP_HOST%3D%27http://www.evernote.com%27%3Btry%7Bvar%20x%3Ddocument.createElement(%27SCRIPT%27)%3Bx.type%3D%27text/javascript%27%3Bx.src%3DEN_CLIP_HOST%2B%27/public/bookmarkClipper.js%3F%27%2B(new%20Date().getTime()/100000)%3Bdocument.getElementsByTagName(%27head%27)%5B0%5D.appendChild(x)%3B%7Dcatch(e)%7Blocation.href%3DEN_CLIP_HOST%2B%27/clip.action%3Furl%3D%27%2BencodeURIComponent(location.href)%2B%27%26title%3D%27%2BencodeURIComponent(document.title)%3B%7D%7D)()%3B

" }}}
